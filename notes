Fix startup and shutdown (and log disasters to stderr)

we need an install script that generates a config file

Complete the schema documentation

  1. Sujai will give me a PNG soon.
  2. Must update comments/types in the schema.
  3. Must submit final version of schema.

Injector fixes:

  1. We need to share entries for identical bodyparts.
  2. Must fix the header_fields->part_numbers FK reference.
  3. ...

FETCH fixes:

  1. PEEK is silently ignored right now.

EXPUNGE fixes:

  1. Must know about shared bodyparts.
  2. Can we use on delete cascade?
  3. Other brokenness.

inject a large number of messages, collect query statistics

test with more imap clients (corp/docs/misc/mua-list)
make sure mailutil works with us

tlsproxy doesn't handle eof (or errors) well

move tests to another program

resource limits on memory allocation

make sure ocd works

the gui should do something

configuration overhaul

archives.oryx.com

top-level message/rfc822 support

rfc2047 encoding

tls client support (smtp, postgresql)

What to do about EventHandlers whose targets have died?

garbage collection (~/imapd.valgrind)

logging cleanups

  Mostly done now. I need to do another quick sweep to ensure that the
  various Logs are created in the right context. Furthermore, the Loop
  should not be calling commit() for every Connection; and they should
  each set their Log/Arena correctly in their Scope.

Miscellaneous cleanups:

  * get rid of Blah::setup wherever possible
  * member-ify some of the static functions in message
  * get rid of some friends
