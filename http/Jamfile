SubDir TOP http ;
SubInclude TOP abnf ;
SubInclude TOP server ;
SubInclude TOP message ;
SubInclude TOP encodings ;

HDRS += [ FDirName $(TOP) http ] ;

SubInclude TOP http components ;

rule BuildBlob {
    Depends $(<) : $(>) ;
    Clean clean : $(<) ;
    SEARCH on $(>) = $(SEARCH_SOURCE) ;
    MakeLocate $(<) : $(LOCATE_SOURCE) ;
}

actions BuildBlob {
    cat $(>) | \
    sed -e 's/[\\"]/\\&/g' | grep . | \
    sed -e 's/\(.*\)/"\1"/' > $(<)
}

Build http : http.cpp link.cpp webpage.cpp pagecomponent.cpp
    frontmatter.cpp httpsession.cpp messagerendering.cpp
    htmlparser.cpp htmlform.cpp ;
