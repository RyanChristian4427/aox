SubDir TOP server ;

HDRS += [ FDirName $(TOP) server ] ;

SubInclude TOP core ;
SubInclude TOP message ;
SubInclude TOP db ;

ObjectDefines server.cpp : USECACHE=$(USECACHE) ;

Build server :
    connection.cpp endpoint.cpp event.cpp logclient.cpp tls.cpp
    eventloop.cpp byteforwarder.cpp server.cpp timer.cpp resolver.cpp
    graph.cpp integerset.cpp ;

# We must link with -lresolv on linux, but not on the BSDs.
if $(OS) = "LINUX" {
    UseLibrary resolver.cpp : resolv ;
}


Build mailbox :
    session.cpp mailbox.cpp
    permissions.cpp selector.cpp threader.cpp ;

Build user : user.cpp ;
